# üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ3: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è Apache Cassandra –¥–ª—è —á–∞—Å–æ–≤–∏—Ö —Ä—è–¥—ñ–≤

[cite_start]–¶–µ–π –ø—Ä–æ—î–∫—Ç —î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ ‚Ññ3, –ø—Ä–∏—Å–≤—è—á–µ–Ω–æ—ó –ø—Ä–æ—î–∫—Ç—É–≤–∞–Ω–Ω—é —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Å—Ö–µ–º –¥–∞–Ω–∏—Ö –≤ Apache Cassandra –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó –≤—ñ—Ç—Ä–æ–≤–∏—Ö –µ–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ–π (–í–∞—Ä—ñ–∞–Ω—Ç ‚Ññ2)[cite: 438].

[cite_start]–ú–µ—Ç–æ—é —î –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç—Ä—å–æ—Ö —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ –ø–∞—Ä—Ç–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞ –æ—Ü—ñ–Ω–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ `Materialized Views` –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤[cite: 3, 9].

---

## üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏.

### 1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å Apache Cassandra —á–µ—Ä–µ–∑ Docker

–°–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö.

1.  **–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª `cassandra.yaml`**:
    –í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É, —â–æ–± –≤–∏—Ç—è–≥–Ω—É—Ç–∏ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª –∑ –æ–±—Ä–∞–∑—É Docker:
    ```bash
    docker run --rm cassandra:latest cat /etc/cassandra/cassandra.yaml > cassandra.yaml
    ```

2.  **–£–≤—ñ–º–∫–Ω—ñ—Ç—å Materialized Views**:
    –í—ñ–¥–∫—Ä–∏–π—Ç–µ —â–æ–π–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —Ñ–∞–π–ª `cassandra.yaml` —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä—è–¥–æ–∫ `# materialized_views_enabled: false` —Ç–∞ –∑–º—ñ–Ω—ñ—Ç—å –π–æ–≥–æ –Ω–∞:
    ```yaml
    materialized_views_enabled: true
    ```

3.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**:
    –í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É, —â–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ Cassandra –∑ –≤–∞—à–∏–º –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–º —Ñ–∞–π–ª–æ–º:
    ```bash
    docker run --name cassandra-lab3 -p 9042:9042 -v "$(pwd)/cassandra.yaml:/etc/cassandra/cassandra.yaml" -d cassandra:latest
    ```
    –ó–∞—á–µ–∫–∞–π—Ç–µ 1-2 —Ö–≤–∏–ª–∏–Ω–∏, –ø–æ–∫–∏ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å—Å—è.

### 2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Python-—Å–µ—Ä–µ–¥–æ–≤–∏—â–µ

1.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ**:
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

2.  **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**:
    ```bash
    pip install cassandra-driver
    ```

---

## ‚ñ∂Ô∏è –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≥–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –∫–æ–º–∞–Ω–¥–æ—é:

```bash
python3 lab3_cassandra_optimization.py
```

### üöÄ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω–∞—î –≤—Å—ñ –µ—Ç–∞–ø–∏:

1.  **–°—Ç–≤–æ—Ä–∏—Ç—å `keyspace` —Ç–∞ —Ç–∞–±–ª–∏—Ü—ñ.**
2.  **–ó–≥–µ–Ω–µ—Ä—É—î —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å 1,000,000 –∑–∞–ø–∏—Å—ñ–≤.**
3.  **–ü—Ä–æ–≤–µ–¥–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** —Ç–∞ –≤–∏–≤–µ–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å.

### üìä –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ –ª–æ–≥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —è–∫–∏–π –≤–∫–ª—é—á–∞—Ç–∏–º–µ:

-   –°—Ç–∞—Ç—É—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ö–µ–º.
-   –ü—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.
-   –¢–∞–±–ª–∏—Ü—ñ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∑ —Ç—Ä—å–æ—Ö —Å—Ö–µ–º —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è `ALLOW FILTERING` –∑ `Materialized View`.

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

--- –°–•–ï–ú–ê 1: Simple Wide Row ---
‚è±Ô∏è  –¢–µ—Å—Ç—É—î–º–æ: –û—Å—Ç–∞–Ω–Ω—ñ 100 –∑–∞–ø–∏—Å—ñ–≤...
-> Avg: 3.92 ms | p95: 5.99 ms | p99: 7.39 ms
‚è±Ô∏è  –¢–µ—Å—Ç—É—î–º–æ: –î—ñ–∞–ø–∞–∑–æ–Ω 6 –≥–æ–¥–∏–Ω...
-> Avg: 44.89 ms | p95: 83.34 ms | p99: 108.50 ms

--- –¢–ï–°–¢–£–í–ê–ù–ù–Ø Materialized View ---
‚è±Ô∏è  –¢–µ—Å—Ç—É—î–º–æ: –§—ñ–ª—å—Ç—Ä > 20 –º/—Å (ALLOW FILTERING)...
-> Avg: 60.57 ms | p95: 104.74 ms | p99: 204.94 ms
‚è±Ô∏è  –¢–µ—Å—Ç—É—î–º–æ: –§—ñ–ª—å—Ç—Ä > 20 –º/—Å (Materialized View)...
-> Avg: 33.75 ms | p95: 56.75 ms | p99: 98.68 ms


### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

-   `lab3_cassandra_optimization.py` - –≥–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç, —â–æ –≤–∏–∫–æ–Ω—É—î –≤—Å—ñ –µ—Ç–∞–ø–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.
-   `cassandra.yaml` - –∫–∞—Å—Ç–æ–º–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è Cassandra –∑ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º–∏ `Materialized Views`.